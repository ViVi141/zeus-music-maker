# 🎮 Arma 3 模组制作完整指南

## 📋 目录

1. [准备工作](#准备工作)
2. [音乐模组制作](#音乐模组制作)
3. [视频模组制作](#视频模组制作)
4. [高级功能](#高级功能)
5. [模组安装](#模组安装)
6. [常见问题](#常见问题)
7. [最佳实践](#最佳实践)

## ⚠️ 重要提示

**模组制作完整流程**（必须按顺序执行）：

1. **第一步**: 使用本工具导出模组文件夹（`导出` → `导出模组`）
2. **第二步**: 使用 Arma 3 Tools 的 Addon Builder 将文件夹打包为 PBO 格式
   - **重要**: 打包前必须在 Options 中配置 "List of files to copy directly" 添加 `*.ogg`（音乐）或 `*.ogv`（视频）
3. **第三步**: 使用本工具的构建插件功能（`工具` → `构建插件`）生成最终插件

**只有完成所有三个步骤后，模组才能在 Arma 3 中正常使用！**

---

## 🚀 准备工作

### 1.1 系统要求检查

在开始之前，请确保您的系统满足以下要求：

- ✅ **操作系统**: Windows 10 (64位) 版本 1607 或更高，或 Windows 11
- ✅ **内存**: 至少 4GB RAM（推荐 8GB 或更多）
- ✅ **存储空间**: 至少 200MB 可用空间
- ✅ **网络连接**: 首次运行需要网络连接（用于下载 FFmpeg）

> 📋 详细系统要求请查看 [系统要求.md](系统要求.md)

### 1.2 下载和安装

#### 方式一：使用预编译版本（推荐）

1. 访问项目 [Releases 页面](https://github.com/ViVi141/zeus-music-maker/releases)
2. 下载最新版本的 `zeus-music-maker.exe`
3. 将文件保存到任意目录（程序为便携版，无需安装）

#### 方式二：从源码构建

```bash
# 克隆仓库
git clone https://github.com/ViVi141/zeus-music-maker.git
cd zeus-music-maker

# 构建项目
cargo build --release

# 可执行文件位于 target/release/zeus-music-maker.exe
```

### 1.3 首次启动

1. **双击运行** `zeus-music-maker.exe`
2. **首次启动**会显示新用户指导对话框
   - 建议仔细阅读指导内容
   - 可以勾选"不再显示"来跳过后续启动时的提示
3. **FFmpeg 自动下载**（首次使用）
   - 程序会自动检测并下载 FFmpeg
   - 下载过程会显示进度条
   - 下载完成后可离线使用

---

## 🎵 音乐模组制作

### 2.1 准备音频文件

#### 步骤 1: 收集音频文件

准备您想要添加到模组中的音频文件。支持以下格式：

- **标准格式**: MP3, WAV, FLAC, M4A, OGG, AAC
- **加密格式**: KGM (酷狗), NCM (网易云) - 需要先解密

#### 步骤 2: 处理加密音频（如需要）

如果您的音频文件是加密格式（KGM 或 NCM），需要先解密：

1. **打开音频解密工具**
   - 点击菜单栏：`工具` → `音频解密`

2. **选择文件**
   - 点击"选择文件"按钮
   - 选择要解密的 KGM 或 NCM 文件
   - 可以一次选择多个文件

3. **选择输出目录**
   - 点击"选择输出目录"按钮
   - 选择一个文件夹用于保存解密后的文件

4. **开始解密**
   - 点击"开始解密"按钮
   - 等待解密完成
   - 解密后的文件会自动保存到输出目录

5. **解密结果**
   - 解密成功后会显示结果对话框
   - 解密后的文件格式通常是 MP3 或 FLAC
   - 文件名会自动转换为 ASCII 安全格式

**注意事项**:
- NCM 解密仅在 Windows 平台支持
- 解密后的文件可以直接用于模组制作

### 2.2 转换音频格式

Arma 3 要求音频文件为 OGG 格式。程序会自动转换：

1. **打开音频转换工具**（可选）
   - 如果您想先转换文件，可以点击：`工具` → `音频转换`
   - 或者直接在模组制作时自动转换

2. **添加音频文件**
   - 在模组制作界面，点击底部"添加音频文件"按钮
   - 选择要添加的音频文件（支持多选）

3. **自动转换**
   - 程序会自动检测文件格式
   - 非 OGG 格式的文件会自动转换为 OGG
   - 转换过程会显示进度

**转换特性**:
- 支持多文件并行转换，速度更快
- 自动处理多语言文件名
- 自动检测重复文件，避免重复处理

### 2.3 配置项目设置

在导出模组之前，需要配置项目信息：

1. **打开项目设置**
   - 点击菜单栏：`文件` → `项目设置`
   - 或使用快捷键（如果有）

2. **填写基本信息**

   **模组名称**:
   - 输入您的模组名称，例如：`我的音乐包`
   - 名称会用于模组文件夹和配置文件
   - 支持中文和英文

   **作者名称**:
   - 输入您的用户名或作者名
   - 会显示在模组信息中

   **Logo 设置**:
   - **使用默认 Logo**: 勾选后使用程序自带的默认 Logo
   - **自定义 Logo**: 取消勾选，然后点击"选择 Logo"选择自定义图片
     - 支持的格式：PNG, JPG, JPEG, BMP, TGA
     - Logo 会自动转换为 PAA 格式
     - 建议尺寸：512x512 或 256x256（2的次方）

3. **保存设置**
   - 点击"确定"保存设置
   - 设置会自动保存，下次启动时会自动加载

### 2.4 管理音频文件

#### 添加文件

1. **单个添加**
   - 点击底部"添加音频文件"按钮
   - 在文件选择对话框中选择文件
   - 支持多选（按住 Ctrl 或 Shift）

2. **批量添加**
   - 可以一次选择多个文件
   - 程序会自动检测重复文件

#### 查看文件列表

- 文件列表显示在主界面中央
- 显示信息包括：
  - 文件名
  - 文件路径
  - 文件大小
  - 状态（已转换/待转换）

#### 编辑文件信息

1. **选择文件**: 在列表中点击要编辑的文件
2. **编辑信息**:
   - 可以修改显示名称
   - 可以添加标签（用于分类）
   - 可以查看详细信息

#### 删除文件

- 选择文件后，点击"删除"按钮
- 或使用右键菜单删除

### 2.5 导出模组（第一步：生成模组文件夹）

当所有文件准备就绪后，首先导出模组文件夹：

1. **打开导出对话框**
   - 点击菜单栏：`导出` → `导出模组`
   - 或使用快捷键

2. **选择导出目录**
   - 点击"选择导出目录"按钮
   - 选择一个文件夹用于保存模组
   - 建议创建一个专门的文件夹，例如：`D:\Arma3Mods\`

3. **配置导出选项**

   **追加标签**（可选）:
   - 勾选后，会在每个轨道名称前添加标签
   - 标签来自文件的标签设置

4. **开始导出**
   - 点击"开始导出"按钮
   - 程序会执行以下操作：
     1. 创建模组目录结构
     2. 转换音频文件为 OGG 格式（如需要）
     3. 复制文件到模组目录
     4. 生成配置文件（config.cpp 等）
     5. 复制 Logo 文件

5. **导出结果**
   - 导出成功后会显示结果对话框
   - 显示导出的文件数量和位置
   - 可以点击"打开文件夹"查看导出的模组

### 2.6 导出的文件结构

导出的模组目录结构如下：

```
MyMusicMod/
├── folderwithtracks/          # 音频文件目录
│   ├── track001.ogg          # 转换后的音频文件
│   ├── track002.ogg
│   └── ...
├── config.cpp                 # 模组配置文件
├── logo.paa                   # Logo 图片
└── steam_logo.paa             # Steam Logo
```

**注意**: 此时还没有 `mod.cpp` 文件，需要在后续步骤中生成。

### 2.7 打包为 PBO 格式（第二步：使用 Arma 3 Tools）

导出模组文件夹后，需要使用 Arma 3 Tools 将其打包为 PBO 格式：

1. **打开 Arma 3 Tools**
   - 在 Steam 库中找到 Arma 3 Tools
   - 如果未安装，请在 Steam 中安装 Arma 3 Tools
   - 启动 Arma 3 Tools

2. **打开 Addon Builder**
   - 在 Arma 3 Tools 中找到 "Addon Builder"
   - 启动 Addon Builder 工具

3. **选择模组文件夹**
   - 在 Addon Builder 中，点击"选择文件夹"或"Browse"
   - 选择刚才导出的模组文件夹（例如：`MyMusicMod`）
   - **重要**: 选择包含 `config.cpp` 和 `folderwithtracks` 的文件夹

4. **配置打包选项**（重要步骤）

   **进入 Options 页面**:
   - 点击 Addon Builder 中的 "Options" 或"选项"按钮
   - 打开选项配置页面

   **配置文件复制列表**:
   - 找到第一行："**List of files to copy directly**"（直接复制的文件列表）
   - **音乐模组**: 添加 `*.ogg`（音频文件扩展名）
   - **视频模组**: 添加 `*.ogv`（视频文件扩展名）
   - **同时包含音乐和视频**: 添加 `*.ogg` 和 `*.ogv`（用分号或换行分隔）
   - 示例格式：`*.ogg` 或 `*.ogv` 或 `*.ogg;*.ogv`

   **其他配置**:
   - **输出路径**: 选择 PBO 文件的保存位置
   - **PBO 名称**: 可以自定义 PBO 文件名（建议使用模组名称）
   - **其他选项**: 使用默认设置即可

   **保存选项**:
   - 确认配置后，关闭 Options 页面或点击"确定"

5. **开始打包**
   - 点击"Build"或"打包"按钮
   - 等待打包完成
   - 打包完成后会生成 `.pbo` 文件

6. **确认 PBO 文件**
   - 检查生成的 PBO 文件
   - 记录 PBO 文件的保存位置
   - PBO 文件通常命名为：`模组名称.pbo` 或 `MusicModPBO.pbo`

**注意事项**:
- PBO 文件是 Arma 3 模组的标准格式
- 必须使用 Arma 3 Tools 的 Addon Builder 进行打包
- **必须配置 Options**: 在 "List of files to copy directly" 中添加 `*.ogg`（音乐）或 `*.ogv`（视频）
- 如果不配置，音频/视频文件可能不会被正确打包到 PBO 中
- 打包后的 PBO 文件包含了所有配置和音频/视频文件

### 2.8 构建插件（第三步：生成最终插件）

获得 PBO 文件后，使用本工具的"构建插件"功能生成最终的插件结构：

1. **打开构建插件工具**
   - 点击菜单栏：`工具` → `构建插件...`

2. **选择 PBO 文件**
   - 在文件选择对话框中，选择刚才生成的 PBO 文件
   - 文件扩展名应为 `.pbo`

3. **选择输出目录**
   - 选择一个文件夹用于保存最终的插件
   - 建议使用新的文件夹，例如：`D:\Arma3Mods\Final\`

4. **开始构建**
   - 程序会自动执行以下操作：
     1. 创建插件目录结构（格式：`@模组名称`）
     2. 创建 `Addons` 文件夹
     3. 复制 PBO 文件到 `Addons` 目录
     4. 生成 `mod.cpp` 文件（模组信息文件）
     5. 复制 Logo 文件到插件根目录

5. **构建结果**
   - 构建成功后会显示结果对话框
   - 显示插件目录和文件位置
   - 可以点击"打开文件夹"查看最终的插件

### 2.9 最终插件结构

构建插件后，最终的插件目录结构如下：

```
@MyMusicMod/
├── Addons/
│   └── MusicModPBO.pbo       # 打包后的模组文件
├── mod.cpp                    # 模组信息文件（自动生成）
├── logo.paa                   # Logo 图片
└── steam_logo.paa            # Steam Logo
```

**文件说明**:
- `Addons/MusicModPBO.pbo`: 包含所有配置和音频文件的 PBO 包
- `mod.cpp`: 模组信息文件，包含名称、作者、描述等
- `logo.paa`: 模组 Logo（用于 Arma 3 Launcher 显示）
- `steam_logo.paa`: Steam 工作坊 Logo（如需要）

**插件命名**:
- 插件文件夹名称以 `@` 开头，例如：`@MyMusicMod`
- 这是 Arma 3 模组的标准命名格式

---

## 🎬 视频模组制作

### 3.1 准备视频文件

#### 步骤 1: 收集视频文件

准备您想要添加到模组中的视频文件。支持以下格式：

- **支持格式**: MP4, AVI, MOV, MKV, WMV, FLV, WEBM, M4V, 3GP, OGV

#### 步骤 2: 选择模组类型

1. **切换到视频模组**
   - 在工具栏选择"视频模组"
   - 界面会切换到视频模组模式

2. **添加视频文件**
   - 点击底部"添加视频文件"按钮
   - 选择要添加的视频文件（支持多选）

### 3.2 转换视频格式

Arma 3 要求视频文件为 OGV 格式。程序会自动转换：

1. **自动检测和转换**
   - 添加文件后，程序会自动检测格式
   - 非 OGV 格式的文件会自动转换

2. **转换特性**
   - **分片处理**: 大文件会自动分片并行处理
   - **智能质量调整**: 根据文件大小自动调整质量
   - **并行转换**: 多个文件同时处理，提升速度

3. **转换进度**
   - 转换过程会显示详细进度
   - 包括当前文件、总进度、速度等信息

### 3.3 配置项目设置

视频模组的配置与音乐模组类似：

1. **打开项目设置**
   - 点击菜单栏：`文件` → `项目设置`

2. **填写信息**
   - **模组名称**: 例如 `我的视频包`
   - **作者名称**: 您的用户名
   - **Logo 设置**: 选择默认或自定义 Logo

3. **保存设置**

### 3.4 管理视频文件

#### 添加文件
- 点击"添加视频文件"按钮
- 支持多选

#### 查看文件信息
- 文件列表显示视频信息：
  - 文件名
  - 分辨率
  - 时长
  - 文件大小
  - 状态

#### 编辑文件信息
- 选择文件后可以编辑：
  - 显示名称
  - 标签（用于分类）

### 3.5 导出模组（第一步：生成模组文件夹）

1. **打开导出对话框**
   - 点击菜单栏：`导出` → `导出模组`

2. **选择导出目录**
   - 选择一个文件夹用于保存模组

3. **开始导出**
   - 点击"开始导出"
   - 程序会：
     1. 创建模组目录
     2. 转换视频文件为 OGV 格式
     3. 复制文件到模组目录
     4. 生成配置文件（config.cpp）
     5. 复制 Logo 文件

4. **导出结果**
   - 查看导出结果
   - 确认文件已正确生成

### 3.6 导出的文件结构

视频模组的目录结构：

```
MyVideoMod/
├── video001.ogv              # 转换后的视频文件
├── video002.ogv
├── ...
├── config.cpp                 # 模组配置文件
├── logo.paa                   # Logo 图片
└── steam_logo.paa            # Steam Logo
```

**注意**: 
- 视频文件直接放在模组根目录，不需要 `folderwithtracks` 文件夹
- 此时还没有 `mod.cpp` 文件，需要在后续步骤中生成

### 3.7 打包为 PBO 格式（第二步：使用 Arma 3 Tools）

与音乐模组相同，需要使用 Arma 3 Tools 的 Addon Builder 打包：

1. **打开 Arma 3 Tools**
   - 启动 Arma 3 Tools
   - 打开 Addon Builder

2. **选择模组文件夹**
   - 选择刚才导出的视频模组文件夹
   - 确保包含 `config.cpp` 和所有视频文件

3. **配置打包选项**（重要步骤）

   **进入 Options 页面**:
   - 点击 Addon Builder 中的 "Options" 或"选项"按钮
   - 打开选项配置页面

   **配置文件复制列表**:
   - 找到第一行："**List of files to copy directly**"（直接复制的文件列表）
   - **视频模组**: 添加 `*.ogv`（视频文件扩展名）
   - 示例格式：`*.ogv`

   **其他配置**:
   - **输出路径**: 选择 PBO 文件的保存位置
   - **PBO 名称**: 可以自定义 PBO 文件名（建议使用模组名称）
   - **其他选项**: 使用默认设置即可

   **保存选项**:
   - 确认配置后，关闭 Options 页面或点击"确定"

4. **打包为 PBO**
   - 点击"Build"或"打包"按钮开始打包
   - 等待打包完成
   - 打包完成后会生成 `.pbo` 文件

5. **确认 PBO 文件**
   - 检查生成的 PBO 文件
   - 记录 PBO 文件的保存位置

### 3.8 构建插件（第三步：生成最终插件）

与音乐模组相同，使用本工具的"构建插件"功能：

1. **打开构建插件工具**
   - 点击菜单栏：`工具` → `构建插件...`

2. **选择 PBO 文件**
   - 选择刚才生成的 PBO 文件

3. **选择输出目录**
   - 选择最终插件的保存位置

4. **开始构建**
   - 程序会自动创建插件结构
   - 生成 `mod.cpp` 文件
   - 复制 Logo 文件

5. **构建结果**
   - 查看构建结果
   - 确认插件结构完整

### 3.9 最终插件结构

视频模组的最终插件结构：

```
@MyVideoMod/
├── Addons/
│   └── VideoModPBO.pbo       # 打包后的模组文件
├── mod.cpp                    # 模组信息文件（自动生成）
├── logo.paa                   # Logo 图片
└── steam_logo.paa            # Steam Logo
```

---

## 🖼️ 高级功能

### 4.1 PAA 图片转换

PAA 是 Arma 3 专用的图片格式。如果您需要自定义 Logo 或其他图片：

1. **打开 PAA 转换工具**
   - 点击菜单栏：`工具` → `PAA 转换`

2. **选择图片文件**
   - 点击"选择文件"按钮
   - 支持的格式：PNG, JPG, JPEG, BMP, TGA
   - 可以一次选择多个文件

3. **选择输出目录**
   - 点击"选择输出目录"按钮
   - 选择保存 PAA 文件的文件夹

4. **配置转换选项**

   **裁剪模式**:
   - **居中裁剪**: 从中心裁剪到2的次方尺寸（推荐）
   - **不裁剪**: 保持原始尺寸（可能导致问题）

   **目标尺寸**（居中裁剪时）:
   - 程序会自动选择最接近的2的次方尺寸
   - 例如：512x512, 256x256, 128x128 等

5. **预览**（可选）
   - 点击"预览"查看转换效果
   - 确认尺寸和效果

6. **开始转换**
   - 点击"开始转换"按钮
   - 等待转换完成

7. **转换结果**
   - 转换成功后会显示结果
   - PAA 文件保存在输出目录

**使用场景**:
- 自定义模组 Logo
- 创建模组图标
- 制作模组界面图片

### 4.2 自定义 Logo

#### 准备 Logo 图片

1. **图片要求**
   - 格式：PNG, JPG, JPEG, BMP, TGA
   - 尺寸：建议 512x512 或 256x256（2的次方）
   - 内容：您的模组 Logo 或图标

2. **转换为 PAA**（如需要）
   - 使用 PAA 转换工具转换图片
   - 或让程序自动转换

#### 设置自定义 Logo

1. **打开项目设置**
   - 点击：`文件` → `项目设置`

2. **取消使用默认 Logo**
   - 取消勾选"使用默认 Logo"

3. **选择 Logo 文件**
   - 点击"选择 Logo"按钮
   - 选择您的 Logo 图片文件
   - 程序会自动转换为 PAA 格式

4. **保存设置**
   - 点击"确定"保存

### 4.3 文件管理技巧

#### 批量处理

1. **批量添加文件**
   - 在文件选择对话框中，可以按住 Ctrl 或 Shift 多选
   - 支持一次添加多个文件

2. **批量转换**
   - 添加文件后，程序会自动批量转换
   - 转换过程并行进行，速度更快

#### 重复文件检测

- 程序会自动检测重复文件
- 相同路径的文件不会重复添加
- 导出时会跳过重复文件

#### 文件组织

**建议的文件组织方式**:
```
工作目录/
├── 原始文件/              # 存放原始音频/视频文件
│   ├── 音乐/
│   └── 视频/
├── 解密文件/              # 存放解密后的文件
└── 导出模组/              # 存放导出的模组
```

---

## 📦 模组安装

### 5.1 安装到 Arma 3

#### 方式一：本地模组（开发测试）

**重要**: 必须使用构建插件后生成的 `@模组名称` 文件夹，而不是最初导出的文件夹。

1. **复制插件文件夹**
   - 将构建插件后生成的插件文件夹（例如：`@MyMusicMod`）复制到 Arma 3 安装目录
   - 路径示例：`C:\Program Files (x86)\Steam\steamapps\common\Arma 3\`
   - **注意**: 文件夹名称必须以 `@` 开头

2. **启动 Arma 3**
   - 打开 Arma 3 Launcher
   - 在"本地模组"中可以看到您的模组
   - 模组名称显示为文件夹名称（不含 `@`）
   - 勾选模组以启用

3. **测试模组**
   - 启动游戏
   - 在游戏中测试模组功能
   - 检查音乐/视频是否正常加载和播放

#### 方式二：Steam 工作坊（发布）

1. **准备插件文件**
   - 使用构建插件后生成的 `@模组名称` 文件夹
   - 确保包含以下文件：
     - `Addons/模组名称.pbo`（PBO 文件）
     - `mod.cpp`（模组信息文件）
     - `logo.paa`（Logo 图片）
   - 检查所有文件是否正确

2. **上传到 Steam 工作坊**
   - 使用 Arma 3 Tools 的 "Publisher" 工具
   - 选择插件文件夹（`@模组名称`）
   - 填写模组信息：
     - **名称**: 模组显示名称
     - **描述**: 详细的模组说明
     - **标签**: 相关标签（音乐、视频等）
     - **预览图**: 上传高质量的预览图
   - 上传 Logo 和预览图

3. **发布模组**
   - 提交审核
   - 等待 Steam 审核
   - 审核通过后模组会出现在工作坊
   - 其他玩家可以订阅您的模组

### 5.2 模组文件检查清单

在安装或发布模组前，请检查：

#### 第一步导出后的检查（模组文件夹）

- ✅ **文件完整性**
  - [ ] 所有音频/视频文件已正确转换
  - [ ] 文件格式为 OGG/OGV
  - [ ] 文件名符合规范（ASCII 安全）

- ✅ **配置文件**
  - [ ] `config.cpp` 文件存在且格式正确
  - [ ] 文件路径配置正确

- ✅ **Logo 文件**
  - [ ] `logo.paa` 文件存在
  - [ ] `steam_logo.paa` 文件存在（如需要）
  - [ ] Logo 尺寸正确

- ✅ **目录结构**
  - [ ] 音乐模组：有 `folderwithtracks` 文件夹
  - [ ] 视频模组：视频文件在根目录
  - [ ] 所有文件路径正确

#### 第二步 PBO 打包后的检查

- ✅ **Options 配置**
  - [ ] 已在 Options 中配置 "List of files to copy directly"
  - [ ] 音乐模组：已添加 `*.ogg`
  - [ ] 视频模组：已添加 `*.ogv`

- ✅ **PBO 文件**
  - [ ] PBO 文件已成功生成
  - [ ] PBO 文件大小合理（不为 0，应包含音频/视频文件）
  - [ ] PBO 文件名称正确

#### 第三步构建插件后的检查（最终插件）

- ✅ **插件结构**
  - [ ] 插件文件夹名称以 `@` 开头
  - [ ] `Addons` 文件夹存在
  - [ ] PBO 文件在 `Addons` 目录中

- ✅ **配置文件**
  - [ ] `mod.cpp` 文件存在且信息完整
  - [ ] 模组名称、作者等信息正确

- ✅ **Logo 文件**
  - [ ] `logo.paa` 文件在插件根目录
  - [ ] `steam_logo.paa` 文件存在（如需要）

- ✅ **完整性**
  - [ ] 所有必需文件都已包含
  - [ ] 文件路径正确
  - [ ] 没有缺失的文件

### 5.3 测试模组

#### 在游戏中测试

1. **启动 Arma 3**
   - 确保模组已启用
   - 启动游戏

2. **测试音乐模组**
   - 进入游戏
   - 打开音乐播放器
   - 检查音乐是否出现在列表中
   - 播放测试音乐

3. **测试视频模组**
   - 进入游戏
   - 打开视频播放器
   - 检查视频是否出现在列表中
   - 播放测试视频

#### 常见问题排查

- **音乐/视频不显示**: 检查 `config.cpp` 配置是否正确
- **文件无法播放**: 检查文件格式是否为 OGG/OGV
- **模组无法加载**: 检查文件路径和目录结构

---

## ❓ 常见问题

### Q1: 程序启动后没有反应？

**A**: 检查以下几点：
- 确保系统满足最低要求（Windows 10 64位）
- 检查是否有杀毒软件拦截
- 查看是否有错误提示
- 尝试以管理员权限运行

### Q2: FFmpeg 下载失败？

**A**: 解决方法：
- 检查网络连接
- 尝试手动下载 FFmpeg 并指定路径
- 使用工具菜单中的"手动选择 FFmpeg 路径"
- 查看 [系统要求.md](系统要求.md) 中的故障排除部分

### Q3: 音频/视频转换失败？

**A**: 可能的原因：
- 文件格式不支持
- 文件已损坏
- 磁盘空间不足
- FFmpeg 未正确安装

**解决方法**:
- 检查文件格式是否支持
- 尝试转换其他文件
- 检查磁盘空间
- 重新下载 FFmpeg

### Q4: 文件名变成乱码或下划线？

**A**: 这是正常现象：
- 程序会自动将多语言文件名转换为 ASCII 安全格式
- 中文文件名会转换为拼音
- 特殊字符会替换为下划线
- 这是为了确保 Windows 和 Arma 3 兼容性

详细说明请查看 [文件名ASCII转换说明.md](文件名ASCII转换说明.md)

### Q5: 导出的模组无法在游戏中加载？

**A**: 检查清单：
- [ ] 文件格式是否正确（OGG/OGV）
- [ ] `config.cpp` 文件是否存在且格式正确
- [ ] 目录结构是否正确
- [ ] 文件路径是否正确
- [ ] 模组文件夹名称是否符合规范（无特殊字符）

### Q6: 如何添加大量文件？

**A**: 建议：
- 使用批量选择功能（Ctrl/Shift 多选）
- 分批次添加，避免一次性添加过多文件
- 确保有足够的磁盘空间和内存

### Q7: 转换速度很慢？

**A**: 优化建议：
- 使用多核心处理器
- 关闭其他占用资源的程序
- 使用 SSD 硬盘
- 减少同时处理的文件数量

### Q8: 如何更新已存在的模组？

**A**: 步骤：
1. 打开之前的项目（如果保存了）
2. 添加新文件或删除旧文件
3. 重新导出模组文件夹
4. 使用 Arma 3 Tools 重新打包为 PBO
5. 使用构建插件工具重新生成插件
6. 替换旧的插件文件夹（`@模组名称`）

### Q9: 必须使用 Arma 3 Tools 打包 PBO 吗？

**A**: 是的，必须使用 Arma 3 Tools 的 Addon Builder：
- PBO 是 Arma 3 的标准格式
- 只有 Arma 3 Tools 能正确打包
- 其他工具可能生成不兼容的 PBO 文件
- Addon Builder 是官方工具，确保兼容性

**重要配置**:
- 在打包前，必须进入 Options 页面
- 在 "List of files to copy directly" 中添加 `*.ogg`（音乐）或 `*.ogv`（视频）
- 如果不添加，音频/视频文件可能不会被正确打包到 PBO 中
- 这会导致模组在游戏中无法正常播放音乐/视频

### Q10: 可以直接使用导出的文件夹作为模组吗？

**A**: 不可以：
- 导出的文件夹只是中间产物
- 必须打包为 PBO 格式
- 必须使用构建插件工具生成最终插件
- 只有 `@模组名称` 格式的插件文件夹才能在 Arma 3 中正常使用

---

## 💡 最佳实践

### 6.1 文件准备

#### 音频文件

- **格式选择**: 建议使用高质量源文件（FLAC、WAV）
- **文件大小**: 单个文件建议不超过 50MB
- **文件数量**: 建议每个模组不超过 100 个文件
- **文件命名**: 使用有意义的文件名，便于管理

#### 视频文件

- **分辨率**: 建议使用 1080p 或更低分辨率
- **文件大小**: 单个文件建议不超过 500MB
- **时长**: 建议每个视频不超过 10 分钟
- **编码格式**: 使用常见的编码格式（H.264）

### 6.2 项目组织

#### 目录结构建议

```
工作目录/
├── 原始文件/
│   ├── 音乐/
│   │   ├── 分类1/
│   │   └── 分类2/
│   └── 视频/
├── 解密文件/          # 解密后的文件
├── 转换文件/          # 转换后的文件（可选）
└── 导出模组/          # 导出的模组
    ├── 模组1/
    └── 模组2/
```

#### 文件命名建议

- 使用有意义的文件名
- 避免特殊字符
- 使用英文或拼音（程序会自动转换）
- 使用统一的命名规则

**示例**:
- ✅ `背景音乐_战斗.mp3`
- ✅ `BackgroundMusic_Combat.mp3`
- ❌ `音乐@#$.mp3`（包含特殊字符）

### 6.3 模组设计

#### 音乐模组

- **分类组织**: 使用标签对音乐进行分类
- **数量控制**: 建议每个模组 20-50 首音乐
- **主题统一**: 保持模组主题一致
- **质量保证**: 确保音频质量良好

#### 视频模组

- **分辨率统一**: 尽量使用相同的分辨率
- **时长控制**: 建议每个视频 1-5 分钟
- **内容相关**: 确保视频内容与模组主题相关

### 6.4 性能优化

#### 转换优化

- **批量处理**: 一次处理多个文件，利用并行处理
- **分片处理**: 大文件会自动分片，无需手动操作
- **质量平衡**: 在质量和文件大小之间找到平衡

#### 文件管理

- **定期清理**: 删除不需要的临时文件
- **备份重要文件**: 定期备份原始文件
- **使用缓存**: 程序会自动缓存，避免重复处理

### 6.5 发布准备

#### 发布前检查

- [ ] **已完成所有三个步骤**：
  - [ ] 第一步：导出模组文件夹
  - [ ] 第二步：打包为 PBO 格式（Arma 3 Tools）
  - [ ] 第三步：构建插件（生成最终插件）
- [ ] 所有文件已正确转换
- [ ] PBO 文件已正确打包
- [ ] 插件结构完整（`@模组名称`格式）
- [ ] 配置文件完整且正确（`mod.cpp`、PBO 中的 `config.cpp`）
- [ ] Logo 文件已准备
- [ ] 模组信息完整（名称、作者、描述）
- [ ] 在游戏中测试通过

#### 发布信息

- **模组名称**: 清晰、有意义的名称
- **描述**: 详细说明模组内容和用途
- **标签**: 添加相关标签，便于搜索
- **预览图**: 准备高质量的预览图（建议 512x512 或更大）

#### 发布流程总结

1. ✅ 导出模组文件夹（本工具：`导出` → `导出模组`）
2. ✅ 打包为 PBO（Arma 3 Tools：Addon Builder）
3. ✅ 构建插件（本工具：`工具` → `构建插件`）
4. ✅ 测试插件（在 Arma 3 中测试）
5. ✅ 发布到工作坊（Arma 3 Tools：Publisher）

---

## 📚 附录

### A. 支持的格式列表

#### 音频格式

| 格式 | 扩展名 | 说明 |
|------|--------|------|
| MP3 | .mp3 | 最常用的音频格式 |
| WAV | .wav | 无损音频格式 |
| FLAC | .flac | 无损压缩音频格式 |
| M4A | .m4a | Apple 音频格式 |
| OGG | .ogg | Arma 3 标准格式 |
| AAC | .aac | 高级音频编码 |

#### 视频格式

| 格式 | 扩展名 | 说明 |
|------|--------|------|
| MP4 | .mp4 | 最常用的视频格式 |
| AVI | .avi | 传统视频格式 |
| MOV | .mov | QuickTime 格式 |
| MKV | .mkv | Matroska 容器格式 |
| WMV | .wmv | Windows Media 格式 |
| FLV | .flv | Flash 视频格式 |
| WEBM | .webm | Web 视频格式 |
| M4V | .m4v | Apple 视频格式 |
| 3GP | .3gp | 移动设备格式 |
| OGV | .ogv | Arma 3 标准格式 |

#### 图片格式

| 格式 | 扩展名 | 说明 |
|------|--------|------|
| PNG | .png | 支持透明背景 |
| JPG/JPEG | .jpg, .jpeg | 常用图片格式 |
| BMP | .bmp | Windows 位图格式 |
| TGA | .tga | Targa 格式 |
| PAA | .paa | Arma 3 专用格式 |

### B. 配置文件说明

#### config.cpp

音乐模组的配置文件，包含：

```cpp
class CfgPatches {
    class MyMusicMod {
        name = "我的音乐模组";
        author = "YourName";
        // ...
    };
};

class CfgMusic {
    // 音乐轨道配置
};

class CfgMusicClasses {
    // 音乐分类配置
};
```

#### mod.cpp

模组信息文件，包含：

```cpp
name = "我的音乐模组";
picture = "logo.paa";
author = "YourName";
// ...
```

### C. 快捷键参考

- **Ctrl+O**: 打开文件（如果支持）
- **Ctrl+S**: 保存项目（如果支持）
- **F1**: 显示帮助（如果支持）

### D. 相关资源

- **Arma 3 官方文档**: [https://community.bistudio.com/wiki](https://community.bistudio.com/wiki)
- **Arma 3 模组开发指南**: [https://community.bistudio.com/wiki/Modding](https://community.bistudio.com/wiki/Modding)
- **项目 GitHub**: [https://github.com/ViVi141/zeus-music-maker](https://github.com/ViVi141/zeus-music-maker)

---

## 🎉 完成！

恭喜您完成了模组制作！现在您可以：

1. ✅ 在 Arma 3 中测试您的模组
2. ✅ 与朋友分享您的模组
3. ✅ 发布到 Steam 工作坊
4. ✅ 继续制作更多模组

**祝您制作愉快！**

---

**最后更新**: 2026年1月  
**文档版本**: 1.0  
**适用版本**: Zeus Music Maker v2.1.0+
